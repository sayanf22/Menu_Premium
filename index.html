<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
    <title>AddMenu - QR Menu & Ordering System</title>
    
    <!-- OneSignal Push Notifications -->
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      console.log('üîî OneSignal script loading...');
      
      // Only initialize OneSignal on production domain (addmenu.site)
      const isProductionDomain = window.location.hostname === 'addmenu.site' || 
                                  window.location.hostname.endsWith('.addmenu.site');
      
      if (isProductionDomain) {
        window.OneSignalDeferred = window.OneSignalDeferred || [];
        OneSignalDeferred.push(async function(OneSignal) {
          console.log('üîî OneSignal initializing...');
          try {
            await OneSignal.init({
              appId: "30e2fbc2-8319-4e46-9cb3-2e9c24b2201c",
              safari_web_id: "web.onesignal.auto.185a3882-a3fa-4e4c-9216-d752294e35fc",
              allowLocalhostAsSecureOrigin: true,
              serviceWorkerPath: "/OneSignalSDKWorker.js",
              // Prompt settings
              promptOptions: {
                slidedown: {
                  prompts: [{
                    type: "push",
                    autoPrompt: false, // We'll prompt manually in dashboard
                    text: {
                      actionMessage: "Get notified when new orders come in!",
                      acceptButton: "Allow",
                      cancelButton: "Later"
                    }
                  }]
                }
              },
              // Notification settings
              notifyButton: {
                enable: false, // We handle this in dashboard
              },
              // Welcome notification
              welcomeNotification: {
                title: "AddMenu Notifications",
                message: "You'll now receive order alerts!"
              }
            });
            
            console.log('‚úÖ OneSignal initialized successfully!');
            
            // Log current state
            const permission = await OneSignal.Notifications.permission;
            console.log('üîî Current permission:', permission);
          } catch (error) {
            console.error('‚ùå OneSignal initialization error:', error);
          }
        });
      } else {
        console.log('‚ö†Ô∏è OneSignal skipped - only runs on addmenu.site (current:', window.location.hostname, ')');
      }
    </script>
    <meta name="description" content="Modern QR ordering system for restaurants. Contactless menu browsing, real-time order tracking, and customer feedback." />
    <meta name="author" content="AddMenu" />

    <meta property="og:title" content="AddMenu - QR Menu & Ordering System" />
    <meta property="og:description" content="Modern QR ordering system for restaurants. Contactless menu browsing, real-time order tracking, and customer feedback." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/og-image.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@QuickMenuDish" />
    <meta name="twitter:image" content="/og-image.png" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
